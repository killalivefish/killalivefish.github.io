---
layout: post
title: "看看事务" 
date: 2020-10-20 19:40:00
author: Hubo
categories: [spring]
tags: [spring]
---

​	数据库中的sql执行错误时，或者方法中包含对数据库的操作，方法报错的时候是不应该把错误的数据插入数据库、甚至删除掉某些数据。所以应该在执行失败时就要取消之前的操作，想实现这个就要依靠事务。

## 事务的原则

ACID:隔离性、原子性、一致性、持久性 

## 没有事务产生的问题

脏读、幻读、不可重复读

## 事务的隔离级别

DEFAULT（默认隔离级别可能不一样）、

RED_UNCOMMIT（可以读到没有提交的数据）、

RED_COMMIT（读已经提交的数据）、

REPEATABLE_READ(重复读)、

SERLALIZABLE（最高级别、所有事务都提交成功才算成功）

## 数据库中的事务

Innodb 支持事务、MyISAM不支持事务 

上面事务的隔离级别主要就是描述数据库中的隔离级别，而在代码中一般会用到框架，所以看看在spring、springboot中是如何实现事务的

## SpringBoot中事务的使用

@Transactional注解

### Spring传播级别



## SpringBoot中事务的实现

AOP+ThreadLocal

JDK动态代理：必须实现接口

CGlib:不需要接口也行--会导致@Transactional注解无效



[大牛博客]: https://blog.csdn.net/weixin_44366439/article/details/90381619#comments_11830314

