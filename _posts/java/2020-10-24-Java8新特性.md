---
layout: post
title: "Java8新特性" 
date: 2020-10-24 20:50:00
author: Hubo
categories: [Java]
tags: [Java]
---

行为参数化，Java8新特性，Lambda,

## Lambda

看看策略模式

1. 定义接口，多个行为的实现类，主类根据业务调用不同的实现类。缺点是定义接口、多个实现类;

   ```java
   public interface BeHaviour {
       public String doSomeThing();
   }
   
   public class KillFish implements BeHaviour {
       @Override
       public String doSomeThing() {
           return "Kill a big fish";
       }
   }
   
   public class KillDragon implements BeHaviour {
       @Override
       public String doSomeThing() {
           return "Kill the evil dragon";
       }
   }
   ```

   

2. 策略枚举，枚举中使用抽象方法，枚举实现抽象方法，减少了接口和类的创建都放到了枚举中；

   ```java
   public enum Action {
       KILL_FISH{
           @Override
           public String doAction() {
               return "Kill a big fish";
           }
       },
       KILL_DRAGON{
           @Override
           public String doAction() {
               return "Kill the evil dragon";
           }
       };
   
       public abstract  String doAction();
   }
   ```

   

   ```java
   public class Knight {
       BeHaviour knightBehaviour;
   
       public Knight() {
       }
   
       public Knight(BeHaviour knightBehaviour) {
           this.knightBehaviour = knightBehaviour;
       }
   
       public void setKnightBehaviour(BeHaviour knightBehaviour) {
           this.knightBehaviour = knightBehaviour;
       }
   
       public void go(){
           System.out.println(this.knightBehaviour.doSomeThing());
       }
   
       public void killFish(){
           System.out.println(Action.KILL_FISH.doAction());
       }
   
       public  void killDragon(){
           System.out.println(Action.KILL_DRAGON.doAction());
       }
   }
   
   ```

   

3. 使用Lambda，不需要创建接口、实现类

@FunctionalInterfacce定义函数式接口

 Predicate<T> 、 Consumer<T> 和 Function<T,R> 

predicate--谓语（断言更合适，返回boolean）

Consumer--消费、顾客（没有返回void）

function--函数（返回泛型）

缺点：

局部变量

## 流

高级迭代器

stream--流水线处理



流类似延迟创建的集合

流只能消费一次

操作：数据源-->中间操作链-->终端操作（会结束流）

终端操作：返回boolean、void、

### 筛选和切片：

filter--排除元素

limit--限制数量

collect--转换

distinct--类似去重，但得实现hascode(),equals()方法

skip--跳过元素，扔掉前几个元素

### 映射：

map--转换

floatmap--转化成独立的流

### 查找和匹配：

 allMatch 、 anyMatch 、 noneMatch 、 findFirst 和 findAny 

### 规约*：

reduce

![stream](/img/stream.jpg)